create database DBWEBHOTEL

use DBWEBHOTEL

-- Tabla para almacenar información de los huéspedes
-- Tabla para almacenar la información de los huéspedes
CREATE TABLE Huespedes (
    HuespedID INT PRIMARY KEY IDENTITY(1,1),          -- Identificador único del huésped
    H_NombreCompleto NVARCHAR(100) NOT NULL,          -- Nombre completo del huésped
    H_Email NVARCHAR(255) NOT NULL,            -- Correo electrónico único del huésped
    H_Telefono NVARCHAR(20),                          -- Número de teléfono del huésped
    H_Direccion NVARCHAR(255)                         -- Dirección del huésped
);

-- Tabla para gestionar las habitaciones individuales del hotel, incluyendo los detalles del tipo de habitación
CREATE TABLE Habitaciones (
    HabitacionID INT PRIMARY KEY IDENTITY(1,1),       -- Identificador único de la habitación
    Hab_NumeroHabitacion NVARCHAR(10) NOT NULL UNIQUE, -- Número o identificador único de la habitación (ej: "101")
    Hab_Piso INT,                                     -- Piso donde se encuentra la habitación
    Hab_Estado NVARCHAR(20) DEFAULT 'Disponible',     -- Estado actual de la habitación (ej: "Disponible", "Ocupada")
    
    -- Detalles del tipo de habitación integrados
    Hab_NombreTipo NVARCHAR(50) NOT NULL,             -- Nombre del tipo de habitación (ej: "Doble", "Suite")
    Hab_DescripcionTipo NVARCHAR(500),                -- Descripción detallada del tipo de habitación
    Hab_Capacidad INT NOT NULL,                       -- Número máximo de personas que soporta esta habitación
    Hab_TarifaBase DECIMAL(10, 2) NOT NULL            -- Tarifa base por noche para esta habitación
);

-- Tabla para registrar las reservas de los huéspedes
CREATE TABLE Reservas (
    ReservaID INT PRIMARY KEY IDENTITY(1,1),          -- Identificador único de la reserva
    HuespedID INT NOT NULL,                           -- Clave foránea al huésped que realiza la reserva
    HabitacionID INT NOT NULL,                        -- Clave foránea a la habitación reservada
    Res_FechaLlegada DATE NOT NULL,                   -- Fecha de llegada programada
    Res_FechaSalida DATE NOT NULL,                    -- Fecha de salida programada
    Res_FechaReserva DATETIME DEFAULT GETDATE(),      -- Fecha y hora en que se realizó la reserva
    Res_NumeroHuespedes INT NOT NULL,                 -- Cantidad de huéspedes en la reserva
    Res_EstadoReserva NVARCHAR(20) DEFAULT 'Confirmada', -- Estado actual de la reserva (ej: "Confirmada", "Cancelada")
    Res_Total DECIMAL(10, 2) NOT NULL,                -- Costo total de la reserva
    Res_Notas NVARCHAR(500),                          -- Notas adicionales para la reserva
    FOREIGN KEY (HuespedID) REFERENCES Huespedes(HuespedID),
    FOREIGN KEY (HabitacionID) REFERENCES Habitaciones(HabitacionID)
);

-- Tabla para registrar los pagos asociados a las reservas
CREATE TABLE Pagos (
    PagoID INT PRIMARY KEY IDENTITY(1,1),             -- Identificador único del pago
    ReservaID INT NOT NULL,                           -- Clave foránea a la reserva a la que pertenece el pago
    Pag_Monto DECIMAL(10, 2) NOT NULL,                -- Monto del pago
    Pag_FechaPago DATETIME DEFAULT GETDATE(),         -- Fecha y hora en que se realizó el pago
    Pag_MetodoPago NVARCHAR(50) NOT NULL,             -- Método de pago utilizado (ej: "Tarjeta de crédito", "Efectivo")
    Pag_EstadoPago NVARCHAR(20) DEFAULT 'Completado', -- Estado del pago (ej: "Completado", "Pendiente")
    FOREIGN KEY (ReservaID) REFERENCES Reservas(ReservaID)
);


-- Datos de ejemplo para la tabla Huespedes
INSERT INTO Huespedes (H_NombreCompleto, H_Email, H_Telefono, H_Direccion) VALUES
('Ana García', 'ana.garcia@example.com', '555-1234', 'Calle Falsa 123, Ciudad'),
('Carlos Ruiz', 'carlos.ruiz@example.com', '555-5678', 'Avenida Siempre Viva 45, Pueblo'),
('María López', 'maria.lopez@example.com', '555-8765', 'Plaza Mayor 7, Villa');

-- Datos de ejemplo para la tabla Habitaciones
INSERT INTO Habitaciones (Hab_NumeroHabitacion, Hab_Piso, Hab_Estado, Hab_NombreTipo, Hab_DescripcionTipo, Hab_Capacidad, Hab_TarifaBase) VALUES
('101', 1, 'Ocupada', 'Doble Estándar', 'Habitación con dos camas individuales o una doble, baño privado.', 2, 80.00),
('102', 1, 'Disponible', 'Suite Ejecutiva', 'Amplia suite con sala de estar separada y vistas a la ciudad.', 2, 150.00),
('201', 2, 'Disponible', 'Doble Estándar', 'Habitación con dos camas individuales o una doble, baño privado.', 2, 80.00),
('202', 2, 'Ocupada', 'Triple Familiar', 'Habitación espaciosa con tres camas o una doble y una individual.', 3, 120.00);


-- Datos de ejemplo para la tabla Reservas
INSERT INTO Reservas (HuespedID, HabitacionID, Res_FechaLlegada, Res_FechaSalida, Res_FechaReserva, Res_NumeroHuespedes, Res_EstadoReserva, Res_Total, Res_Notas) VALUES
(1, 1, '2025-07-01', '2025-07-05', GETDATE(), 2, 'Confirmada', 320.00, 'Check-in temprano solicitado.'),
(2, 4, '2025-07-10', '2025-07-12', GETDATE(), 3, 'Confirmada', 240.00, 'Se necesita cama extra para niño.'),
(3, 1, '2025-08-01', '2025-08-03', GETDATE(), 2, 'Pendiente', 160.00, 'Pago pendiente.');

-- Datos de ejemplo para la tabla Pagos
INSERT INTO Pagos (ReservaID, Pag_Monto, Pag_FechaPago, Pag_MetodoPago, Pag_EstadoPago) VALUES
(1, 320.00, GETDATE(), 'Tarjeta de crédito', 'Completado'),
(2, 240.00, GETDATE(), 'Transferencia bancaria', 'Completado');

INSERT INTO Habitaciones (Hab_NumeroHabitacion, Hab_Piso, Hab_Estado, Hab_NombreTipo, Hab_DescripcionTipo, Hab_Capacidad, Hab_TarifaBase) VALUES
('301', 3, 'Disponible', 'Doble Deluxe', 'Habitación doble con balcón y vista al mar.', 2, 100.00),
('302', 3, 'Disponible', 'Suite Presidencial', 'Lujosa suite con múltiples habitaciones, jacuzzi y servicio exclusivo.', 4, 300.00),
('401', 4, 'Ocupada', 'Individual', 'Habitación pequeña con una cama individual y baño.', 1, 60.00),
('402', 4, 'Disponible', 'Doble Estándar', 'Habitación con dos camas individuales o una doble, baño privado.', 2, 80.00);
